{
  "type" : [ "h-entry" ],
  "properties" : {
    "name" : [ "You can have user accounts without needing to manage user accounts" ],
    "category" : [ "auth0", "openbenches", "social-media" ],
    "url" : [ "https://shkspr.mobi/blog/2022/12/you-can-have-user-accounts-without-needing-to-manage-user-accounts/" ],
    "published" : [ "2022-12-13" ],
    "updated" : [ "2022-12-13" ],
    "content" : [ {
      "html" : "<a class=\"hidden\" href=\"https://shkspr.mobi/blog/wp-content/uploads/2022/10/avoid.jpeg\" itemprop=\"https://schema.org/image\"></a><p>The inimitable Simon Willison has a brilliant presentation all about managing side projects:</p><p><iframe data-lazyloaded=\"1\" src=\"about:blank\" title=\"Massively increase your productivity on personal projects with comprehensive documentation and automated tests\" id=\"talk_frame_938467\" class=\"speakerdeck-iframe\" data-src=\"//speakerdeck.com/player/1af98590ac6d4c0889c3286dfa37606c\" width=\"620\" height=\"348\" style=\"aspect-ratio:620/348; border:0; padding:0; margin:0; background:transparent;\" frameborder=\"0\" allowtransparency=\"true\" allowfullscreen=\"allowfullscreen\" mozallowfullscreen=\"true\" webkitallowfullscreen=\"true\"></iframe></p><noscript><iframe title=\"Massively increase your productivity on personal projects with comprehensive documentation and automated tests\" id=\"talk_frame_938467\" class=\"speakerdeck-iframe\" src=\"https://speakerdeck.com/player/1af98590ac6d4c0889c3286dfa37606c\" width=\"620\" height=\"348\" style=\"aspect-ratio:620/348; border:0; padding:0; margin:0; background:transparent;\" frameborder=\"0\" allowtransparency=\"true\" allowfullscreen=\"allowfullscreen\" mozallowfullscreen=\"true\" webkitallowfullscreen=\"true\"></iframe></noscript><p>It is all good advice. But I gently disagree with the slide which says:</p><blockquote><p>\nAvoid side projects with user accounts<br>\nIf it has user accounts it’s not a side-project, it’s an unpaid job</p></blockquote><p>I get the sentiment. Storing passwords securely is hard. Dealing with users changing their names is hard. Updating avatars is hard. GDPR is hard. It's just a lot of pain and suffering.</p><p>But I <em>still</em> have user accounts on one of my side projects while avoiding all those issues.  Here's how it works on <a href=\"https://openbenches.org/\">OpenBenches</a>.</p><h2 id=\"use-auth0\"><a href=\"https://shkspr.mobi/blog/2022/12/you-can-have-user-accounts-without-needing-to-manage-user-accounts/#use-auth0\" class=\"heading-link\">Use Auth0</a></h2><p>The <a href=\"https://auth0.com/\">Auth0 service</a> is a multi-vendor OAuth provider. That means I can offer a button which \"login\" which leads to this screen:</p><p><img decoding=\"async\" loading=\"lazy\" src=\"https://shkspr.mobi/blog/wp-content/uploads/2022/10/Screenshot-2022-10-18-at-19-14-56-Log-in-OpenBenches.png\" alt=\"Login page with buttons for Facebook, Twitter, WordPress, GitHub, and LinkedIn.\" width=\"500\" height=\"708\" class=\"aligncenter size-full wp-image-43760\"></p><p>Auth0 has <a href=\"https://marketplace.auth0.com/features/social-connections\">around 60 different social login providers</a>. I picked the ones which best suited my users' demographic.</p><p>So the user hits \"Sign In With Twitter<sup id=\"fnref-43758-twit\"><a href=\"https://shkspr.mobi/blog/2022/12/you-can-have-user-accounts-without-needing-to-manage-user-accounts/#fn-43758-twit\" class=\"jetpack-footnote\" title=\"Read footnote.\">1</a></sup>\", gives Twitter their username, password, blood sample, and 2FA token. Twitter gives OpenBenches an authentication token with <em>read only</em> access.</p><p>This is important. Even if I were hacked and the tokens stolen, an attacker wouldn't be able to alter the user's account on a different platform.</p><p>But, as it is, I don't store the token. So it can't be stolen.</p><h2 id=\"only-store-the-essentials\"><a href=\"https://shkspr.mobi/blog/2022/12/you-can-have-user-accounts-without-needing-to-manage-user-accounts/#only-store-the-essentials\" class=\"heading-link\">Only store the essentials</a></h2><p>Here's the database which contains my user \"accounts\":</p><pre><code class=\"language-sql\">CREATE TABLE `users` (\n  `userID` bigint(20) NOT NULL,\n  `provider` varchar(64) COLLATE utf8mb4_unicode_ci NOT NULL,\n  `providerID` varchar(64) COLLATE utf8mb4_unicode_ci NOT NULL,\n  `name` varchar(128) COLLATE utf8mb4_unicode_ci NOT NULL\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\n</code></pre><p>The <code>userID</code> is just an internally-used key which is incremented. I guess it could be a GUID or something.</p><p>The <code>provider</code> is a string like <code>twitter</code> or <code>facebook</code> or <code>linkedin</code> etc.</p><p>The <code>providerID</code> is the publicly available ID assigned by the social login service. Twitter gives everyone a number, LinkedIn gives everyone a random string, etc.</p><p>The <code>name</code> is the string that the provider calls you. My Twitter name is <code>@edent</code> and my LinkedIn name is <code>Thought Leader Terence Eden</code>.</p><p>That's it!  I don't store any access tokens. I don't store a date of birth. I don't store any data unnecessary to running my project.</p><h2 id=\"what-about-updates\"><a href=\"https://shkspr.mobi/blog/2022/12/you-can-have-user-accounts-without-needing-to-manage-user-accounts/#what-about-updates\" class=\"heading-link\">What about updates?</a></h2><p>I don't store URls to avatar images. Instead, I use <a href=\"https://cloudinary.com/documentation/social_media_profile_pictures\">Cloudinary's Social Avatar service</a>. That's usually as simple as calling <code>res.cloudinary.com/demo/image/twitter/1330457336.jpg</code> - I have to fuss around a little for GitHub and Facebook.  So as soon as the user changes their avatar with their provider, it changes on my site.</p><p>Sometimes people change their names. Every time they log in to OpenBenches, I check to see if their <code>name</code> has changed - and update it if it has.</p><p>Most services don't let you change your internal ID. So that's fixed.</p><h2 id=\"where-it-goes-wrong\"><a href=\"https://shkspr.mobi/blog/2022/12/you-can-have-user-accounts-without-needing-to-manage-user-accounts/#where-it-goes-wrong\" class=\"heading-link\">Where it goes wrong</a></h2><p>It isn't all sunshine and roses though.  Here are two things which might give you cause for concern.</p><p>What if a user wants to merge their accounts? On OpenBenches we sometimes get users who set up two accounts - and then want data from each of them merged. So far, my answer has just been \"no\".</p><p>What if a user wants to delete their account? Well, they can delete it with Twitter or whoever. If someone asked, I'd probably delete their username from the table.  But it hasn't happened yet.</p><h2 id=\"should-you-do-this\"><a href=\"https://shkspr.mobi/blog/2022/12/you-can-have-user-accounts-without-needing-to-manage-user-accounts/#should-you-do-this\" class=\"heading-link\">Should you do this?</a></h2><p>I'm not your real dad.  It isn't my job to tell you how to live your life or set up your side projects.</p><p>Generally speaking, user accounts are bad news.  We resisted having them on OpenBenches for the longest time - people were anonymous.  But we had lots of users who wanted a leader board so they could show off how many benches they had uploaded.  The only way we could build that is with user accounts.  So we added it. <a href=\"https://openbenches.org/leaderboard\">You can see the Leader Board in action</a>.</p><p>Building side projects can be a bit lonely. So it is sometimes nice to develop a community of people who want to use your stuff.</p><div class=\"footnotes\"><hr><ol><li id=\"fn-43758-twit\">\nThis blog post was written before Alan turned off the 2FA from Twitter. Then turned it back on. Then fired everyone. Then rehired them. Then whined about how much food they ate. Anyway, I've left Twitter. Come <a href=\"https://mastodon.social/@edent\">join me on Mastodon</a>! <a href=\"https://shkspr.mobi/blog/2022/12/you-can-have-user-accounts-without-needing-to-manage-user-accounts/#fnref-43758-twit\" title=\"Return to main content.\">↩</a></li></ol></div><hr class=\"hr-share\"><div class=\"sharedaddy sd-sharing-enabled\"><div class=\"robots-nocontent sd-block sd-social sd-social-icon-text sd-sharing\"><h3 class=\"sd-title\">Share the love:</h3><div class=\"sd-content\"><ul><li class=\"share-custom share-custom-mastodon\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"\" class=\"share-custom share-custom-mastodon sd-button share-icon\" href=\"https://shkspr.mobi/blog/2022/12/you-can-have-user-accounts-without-needing-to-manage-user-accounts/?share=custom-1669612951\" target=\"_blank\" title=\"Click to share on Mastodon\"><span style='background-image:url(\"https://edent.github.io/SuperTinyIcons/images/svg/mastodon.svg\");'>Mastodon</span></a></li><li class=\"share-twitter\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"sharing-twitter-43758\" class=\"share-twitter sd-button share-icon\" href=\"https://shkspr.mobi/blog/2022/12/you-can-have-user-accounts-without-needing-to-manage-user-accounts/?share=twitter\" target=\"_blank\" title=\"Click to share on Twitter\"><span>Twitter</span></a></li><li class=\"share-facebook\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"sharing-facebook-43758\" class=\"share-facebook sd-button share-icon\" href=\"https://shkspr.mobi/blog/2022/12/you-can-have-user-accounts-without-needing-to-manage-user-accounts/?share=facebook\" target=\"_blank\" title=\"Click to share on Facebook\"><span>Facebook</span></a></li><li class=\"share-linkedin\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"sharing-linkedin-43758\" class=\"share-linkedin sd-button share-icon\" href=\"https://shkspr.mobi/blog/2022/12/you-can-have-user-accounts-without-needing-to-manage-user-accounts/?share=linkedin\" target=\"_blank\" title=\"Click to share on LinkedIn\"><span>LinkedIn</span></a></li><li class=\"share-reddit\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"\" class=\"share-reddit sd-button share-icon\" href=\"https://shkspr.mobi/blog/2022/12/you-can-have-user-accounts-without-needing-to-manage-user-accounts/?share=reddit\" target=\"_blank\" title=\"Click to share on Reddit\"><span>Reddit</span></a></li><li class=\"share-custom share-custom-hackernews\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"\" class=\"share-custom share-custom-hackernews sd-button share-icon\" href=\"https://shkspr.mobi/blog/2022/12/you-can-have-user-accounts-without-needing-to-manage-user-accounts/?share=custom-1636378723\" target=\"_blank\" title=\"Click to share on HackerNews\"><span style='background-image:url(\"https://news.ycombinator.com/y18.gif\");'>HackerNews</span></a></li><li class=\"share-custom share-custom-lobsters\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"\" class=\"share-custom share-custom-lobsters sd-button share-icon\" href=\"https://shkspr.mobi/blog/2022/12/you-can-have-user-accounts-without-needing-to-manage-user-accounts/?share=custom-1636378943\" target=\"_blank\" title=\"Click to share on Lobsters\"><span style='background-image:url(\"https://lobste.rs/favicon.ico\");'>Lobsters</span></a></li><li class=\"share-email\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"\" class=\"share-email sd-button share-icon\" href=\"mailto:?subject=%5BShared%20Post%5D%20You%20can%20have%20user%20accounts%20without%20needing%20to%20manage%20user%20accounts&amp;body=https%3A%2F%2Fshkspr.mobi%2Fblog%2F2022%2F12%2Fyou-can-have-user-accounts-without-needing-to-manage-user-accounts%2F&amp;share=email\" target=\"_blank\" title=\"Click to email a link to a friend\" data-email-share-error-title=\"Do you have email set up?\" data-email-share-error-text=\"If you're having problems sharing via email, you might not have email set up for your browser. You may need to create a new email yourself.\" data-email-share-nonce=\"ec478555e9\" data-email-share-track-url=\"https://shkspr.mobi/blog/2022/12/you-can-have-user-accounts-without-needing-to-manage-user-accounts/?share=email\"><span>Email</span></a></li><li class=\"share-pocket\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"\" class=\"share-pocket sd-button share-icon\" href=\"https://shkspr.mobi/blog/2022/12/you-can-have-user-accounts-without-needing-to-manage-user-accounts/?share=pocket\" target=\"_blank\" title=\"Click to share on Pocket\"><span>Pocket</span></a></li><li class=\"share-jetpack-whatsapp\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"\" class=\"share-jetpack-whatsapp sd-button share-icon\" href=\"https://shkspr.mobi/blog/2022/12/you-can-have-user-accounts-without-needing-to-manage-user-accounts/?share=jetpack-whatsapp\" target=\"_blank\" title=\"Click to share on WhatsApp\"><span>WhatsApp</span></a></li><li class=\"share-telegram\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"\" class=\"share-telegram sd-button share-icon\" href=\"https://shkspr.mobi/blog/2022/12/you-can-have-user-accounts-without-needing-to-manage-user-accounts/?share=telegram\" target=\"_blank\" title=\"Click to share on Telegram\"><span>Telegram</span></a></li><li class=\"share-end\"></ul></div></div></div>",
      "value" : "The inimitable Simon Willison has a brilliant presentation all about managing side projects:\n\nIt is all good advice. But I gently disagree with the slide which says:\nAvoid side projects with user accounts\nIf it has user accounts it’s not a side-project, it’s an unpaid job\nI get the sentiment. Storing passwords securely is hard. Dealing with users changing their names is hard. Updating avatars is hard. GDPR is hard. It's just a lot of pain and suffering.\nBut I still have user accounts on one of my side projects while avoiding all those issues. Here's how it works on OpenBenches.Use Auth0\nThe Auth0 service is a multi-vendor OAuth provider. That means I can offer a button which \"login\" which leads to this screen:\nLogin page with buttons for Facebook, Twitter, WordPress, GitHub, and LinkedIn.\nAuth0 has around 60 different social login providers. I picked the ones which best suited my users' demographic.\nSo the user hits \"Sign In With Twitter1\", gives Twitter their username, password, blood sample, and 2FA token. Twitter gives OpenBenches an authentication token with read only access.\nThis is important. Even if I were hacked and the tokens stolen, an attacker wouldn't be able to alter the user's account on a different platform.\nBut, as it is, I don't store the token. So it can't be stolen.Only store the essentials\nHere's the database which contains my user \"accounts\":CREATE TABLE `users` ( `userID` bigint(20) NOT NULL, `provider` varchar(64) COLLATE utf8mb4_unicode_ci NOT NULL, `providerID` varchar(64) COLLATE utf8mb4_unicode_ci NOT NULL, `name` varchar(128) COLLATE utf8mb4_unicode_ci NOT NULL ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\nThe userID is just an internally-used key which is incremented. I guess it could be a GUID or something.\nThe provider is a string like twitter or facebook or linkedin etc.\nThe providerID is the publicly available ID assigned by the social login service. Twitter gives everyone a number, LinkedIn gives everyone a random string, etc.\nThe name is the string that the provider calls you. My Twitter name is @edent and my LinkedIn name is Thought Leader Terence Eden.\nThat's it! I don't store any access tokens. I don't store a date of birth. I don't store any data unnecessary to running my project.What about updates?\nI don't store URls to avatar images. Instead, I use Cloudinary's Social Avatar service. That's usually as simple as calling res.cloudinary.com/demo/image/twitter/1330457336.jpg - I have to fuss around a little for GitHub and Facebook. So as soon as the user changes their avatar with their provider, it changes on my site.\nSometimes people change their names. Every time they log in to OpenBenches, I check to see if their name has changed - and update it if it has.\nMost services don't let you change your internal ID. So that's fixed.Where it goes wrong\nIt isn't all sunshine and roses though. Here are two things which might give you cause for concern.\nWhat if a user wants to merge their accounts? On OpenBenches we sometimes get users who set up two accounts - and then want data from each of them merged. So far, my answer has just been \"no\".\nWhat if a user wants to delete their account? Well, they can delete it with Twitter or whoever. If someone asked, I'd probably delete their username from the table. But it hasn't happened yet.Should you do this?\nI'm not your real dad. It isn't my job to tell you how to live your life or set up your side projects.\nGenerally speaking, user accounts are bad news. We resisted having them on OpenBenches for the longest time - people were anonymous. But we had lots of users who wanted a leader board so they could show off how many benches they had uploaded. The only way we could build that is with user accounts. So we added it. You can see the Leader Board in action.\nBuilding side projects can be a bit lonely. So it is sometimes nice to develop a community of people who want to use your stuff. This blog post was written before Alan turned off the 2FA from Twitter. Then turned it back on. Then fired everyone. Then rehired them. Then whined about how much food they ate. Anyway, I've left Twitter. Come join me on Mastodon! ↩Share the love:MastodonTwitterFacebookLinkedInRedditHackerNewsLobstersEmailPocketWhatsAppTelegram",
      "lang" : "en-GB"
    } ],
    "author" : [ {
      "type" : [ "h-card" ],
      "properties" : {
        "name" : [ "@edent" ],
        "photo" : [ {
          "value" : "https://shkspr.mobi/apple-touch-icon.png",
          "alt" : ""
        } ]
      },
      "lang" : "en-GB",
      "value" : "@edent"
    } ]
  },
  "lang" : "en-GB"
}
